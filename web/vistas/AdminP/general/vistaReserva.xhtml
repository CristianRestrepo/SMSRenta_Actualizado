<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <body>

        <ui:composition template="./../template-admin-p.xhtml">

            <ui:define name="content">
                <b:container fluid="true">
                    <b:row>
                        <h:form>
                            <p:growl id="msg" autoUpdate="true" showDetail="true" life="3000"/>
                            <b:column col-lg="12" col-md="12" col-sm="12" col-xs="12">
                                <!-- Content Header (Page header) -->


                                <div class="pad margin no-print">
                                    <div class="callout callout-info" style="margin-bottom: 0!important;">
                                        <h4>Reserva #{reservacionBean.reservaView.idReservacion}</h4>
                                        Su reserva ha sido exitosa, porfavor verifique los datos ingresados en la reservación
                                        antes de realizar el pago del servicio.
                                    </div>
                                </div>

                                <!-- Main content -->
                                <section class="invoice">
                                    <!-- title row -->
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <img class="img-bordered-sm" src="../../../../resources/images/logo-DASH.png" style="" />  
                                            <h2 class="page-header">
                                                Datos de la Reservación 
                                            </h2>
                                        </div><!-- /.col -->
                                    </div>
                                    <!-- info row -->
                                    <div class="row invoice-info">
                                        <div class="col-sm-3 invoice-col">
                                            De:
                                            <address>
                                                <strong>SMS Renta.</strong><br></br>
                                                Calle 4D # 55-10 Piso 3<br></br>
                                                Bogotá - Colombia 111611<br></br>
                                                Teléfono:  (57 +1) 406 55 20<br></br>
                                                Email: <br/>
                                                edwinrobles <strong>@smsrenta.com</strong>
                                            </address>
                                        </div><!-- /.col -->
                                        <div class="col-sm-3 invoice-col">
                                            Para:<br/>
                                            <address>
                                                <strong>#{reservacionBean.modReservacionView.smsUsuario.usuarioNombre}</strong><br></br>
                                                Cc: #{reservacionBean.modReservacionView.smsUsuario.usuarioCc}<br></br>
                                                Teléfono: #{reservacionBean.modReservacionView.smsUsuario.usuarioTelefono}<br></br>
                                                Email:  #{reservacionBean.modReservacionView.smsUsuario.usuarioEmail}
                                            </address>
                                        </div><!-- /.col -->

                                        <div class="col-sm-6 invoice-col">
                                            <h3>Conductor elegido para Servicio</h3>
                                            <div class="col-sm-6">
                                                <address>
                                                    <strong>Nombre: #{reservacionBean.modReservacionView.smsEmpleado.smsUsuario.usuarioNombre}</strong><br></br>
                                                    Cc: #{reservacionBean.modReservacionView.smsEmpleado.smsUsuario.usuarioCc}<br></br>
                                                    Razon Social: #{reservacionBean.modReservacionView.smsEmpleado.smsProveedor.proveedorRazonSocial}<br></br>
                                                    Teléfono: #{reservacionBean.modReservacionView.smsEmpleado.smsUsuario.usuarioTelefono}<br></br>
                                                    Email: #{reservacionBean.modReservacionView.smsEmpleado.smsUsuario.usuarioEmail}
                                                </address>                                        
                                            </div>
                                            <div class="col-sm-6">
                                                <p:graphicImage width="150" height="150" value="#{reservacionBean.modReservacionView.smsEmpleado.smsUsuario.usuarioFotoRuta}" alt="Conductor" class="img-thumbnail img-responsive"/>
                                            </div>

                                        </div><!-- /.col -->
                                    </div>

                                    <!-- Table row -->

                                    <div class="row">
                                        <div class="col-xs-12 table-responsive" style="margin-top: 20px">
                                            <table class="table table-striped">
                                                <thead>
                                                    <tr>
                                                        <td></td>
                                                        <th>Ciudad</th>
                                                        <th>Lugar</th>
                                                        <th>Fechas</th>
                                                        <th>Horas</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <th>Recogida</th>
                                                        <td>#{reservacionBean.modReservacionView.smsCiudadByIdCiudadInicio.ciudadNombre}</td>
                                                        <td>#{reservacionBean.modReservacionView.reservacionLugarLlegada}</td>
                                                        <td>#{reservacionBean.modReservacionView.reservacionFechaInicio}</td>
                                                        <td>#{reservacionBean.modReservacionView.reservacionHoraInicio}</td>
                                                    </tr>
                                                    <tr>
                                                        <th>Entrega</th>
                                                        <td>#{reservacionBean.modReservacionView.smsCiudadByIdCiudadDestino.ciudadNombre}</td>
                                                        <td>#{reservacionBean.modReservacionView.reservacionLugarDestino}</td>
                                                        <td>#{reservacionBean.modReservacionView.reservacionFechaLlegada}</td>
                                                        <td>#{reservacionBean.modReservacionView.reservacionHoraLlegada}</td>
                                                    </tr>
                                                    <tr>
                                                        <th>Observaciones</th>
                                                        <td>#{reservacionBean.modReservacionView.reservacionNotas}</td>                                                
                                                    </tr>
                                                    <!--<tr>
                                                        <td>1</td>
                                                        <td>Grown Ups Blue Ray</td>
                                                        <td>422-568-642</td>
                                                        <td>Tousled lomo letterpress</td>
                                                        <td>$25.99</td>
                                                    </tr>-->
                                                </tbody>
                                            </table>
                                        </div><!-- /.col -->
                                    </div><!-- /.row -->

                                    <div class="row">
                                        <!-- accepted payments column -->
                                        <div class="col-xs-6">
                                            <h3 class="lead">Método de Pagos:</h3>
                                            <div class="col-xs-7" style="padding-top: 38px">
                                                <img src="../../../../resources/images/pago/visa.png" alt="Visa"></img>
                                                <img src="../../../../resources/images/pago/mastercard.png" alt="Mastercard"></img>
                                                <img src="../../../../resources/images/pago/american-express.png" alt="American Express"></img>
                                                <img src="../../../../resources/images/pago/paypal2.png" alt="Paypal" /> 

                                            </div>
                                            <div class="col-xs-5 ">
                                                <h6><em>Código QR de Reservación</em></h6>
                                                <img src="../../../../resources/images/pago/cod-q.png" class="img-bordered-sm" alt="Código QR" style="max-width: 150px ; margin-bottom: 20px"/>                                         
                                            </div>
                                            <div class="col-xs-12">
                                                <p class="text-muted well well-sm no-shadow text-justify" style="margin-top: 10px;">
                                                    <em>                                            
                                                        Aplica condiciones y restricciones referentes a la reservacion, Al momento de realizar 
                                                        cambios en la reservacion como cambio de fechas, horas o lugares de recogida y entrega
                                                        deberá ajustarse a la disponibilidad de los nuevos cambios en los parametros.
                                                    </em>
                                                </p>

                                            </div>
                                        </div><!-- /.col -->
                                        <div class="col-xs-6">
                                            <p:graphicImage style="margin-left: 20%; margin-bottom: 10px" width="256" height="256" value="#{reservacionBean.modReservacionView.smsVehiculo.vehFotoRuta}" alt="Vehiculo" class="img-thumbnail img-responsive"/>

                                            <div class="col-sm-12 invoice-col">
                                                <div class="table-responsive">
                                                    <table class="table">
                                                        <tr>
                                                            <th style="width:50%">Marca:</th>
                                                            <td>#{reservacionBean.modReservacionView.smsVehiculo.smsReferencia.smsMarca.marcaNombre}</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Referencia:</th>
                                                            <td>#{reservacionBean.modReservacionView.smsVehiculo.smsReferencia.referenciaNombre}</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Placa:</th>
                                                            <td>#{reservacionBean.modReservacionView.smsVehiculo.vehPlaca}</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Color:</th>
                                                            <td>#{reservacionBean.modReservacionView.smsVehiculo.smsColor.colorNombre}</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Personas:</th>
                                                            <td>#{reservacionBean.modReservacionView.smsVehiculo.vehNumPersonas}</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Maletas Grandes:</th>
                                                            <td>#{reservacionBean.modReservacionView.smsVehiculo.vehNumMalGrande}</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Maletas Pequeñas:</th>
                                                            <td>#{reservacionBean.modReservacionView.smsVehiculo.vehNumMalPequeña}</td>
                                                        </tr>
                                                    </table>
                                                </div>
                                            </div><!-- /.col -->
                                        </div><!-- /.col -->
                                        <hr/>
                                        <div class="col-xs-6">
                                            <p class="lead">Valor a Pagar</p>
                                            <div class="table-responsive">
                                                <table class="table">
                                                    <tr>
                                                        <th style="width:50%">Subtotal:</th>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <th>IVA (16.3%)</th>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <th>Extras:</th>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <th>Total:</th>
                                                        <td>#{reservacionBean.modReservacionView.reservacionCosto}</td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div><!-- /.col -->
                                    </div><!-- /.row -->

                                    <!-- this row will not appear when printing -->
                                    <div class="row no-print">
                                        <div class="col-xs-12" align="left">
                                            <h:panelGrid columns="3">
                                                <p:commandButton class="btn btn-danger pull-right" action="#{reservacionBean.eliminarReservacion()}" onclick="PrimeFaces.monitorDownload(start, stop);" update="@form"  value="Cancelar Reservacion">
                                                    <p:confirm header="Confirmacion" message="Esta seguro que desea cancelar esta reservación?" icon="ui-icon-alert" /> 
                                                </p:commandButton>                                 
                                                <p:commandButton ajax="false" class="btn btn-primary pull-right" process="@this" action="#{facturaBean.generarFactura()}" value="Genarar factura">
                                                    <f:setPropertyActionListener value="#{reservacionBean.modReservacionView}" target="#{facturaBean.reservacionView}"/>
                                                </p:commandButton>
                                                <p:commandButton ajax="false" class="btn btn-success pull-right" process="@this" action="#{facturaBean.generarFacturaPos()}" value="Generar factura POS">
                                                   <f:setPropertyActionListener value="#{reservacionBean.modReservacionView}" target="#{facturaBean.reservacionView}"/> 
                                                </p:commandButton>
                                            </h:panelGrid>
                                            <script type="text/javascript">
                                                function start() {
                                                PF('statusDialog').show();
                                                }

                                                function stop() {
                                                PF('statusDialog').hide();
                                                }
                                            </script>
                                    <p:dialog modal="true" widgetVar="statusDialog" header="Cancelando reservacion" draggable="false" closable="false" resizable="false">
                                        <p:graphicImage width="100%" value="/resources/images/demo/ajaxloadingbar.gif" />
                                    </p:dialog>
                                            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                                <b:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" look="success" iconAwesome="fa fa-check" />
                                                <b:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" look="danger" iconAwesome="fa fa-close" />
                                            </p:confirmDialog>
                                        </div>
                                    </div>
                                </section>
                                <!-- /.content -->
                            </b:column>
                        </h:form>
                    </b:row>
                </b:container>
            </ui:define>

        </ui:composition>

    </body>
</html>
